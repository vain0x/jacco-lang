# 方針

WIP

実現可能かはさておき、ジャッコ言語は次のような性質を持つようにしたい。

構文:

- 具象構文の重要性は低いので、ここに weirdness budget を割きたくない
- 現時点で支配的なシェアを持つ、C言語系の構文にしたい
- ただし、字句解析や構文解析上の難点は解決する必要がある
- いまのところ Rust の構文を真似るのがよさそう
- ただし、ジェネリクスのカッコは `[]` にしている

意味論:

- 基本的にC言語をベースにする
- Cにおいてマクロなどで対処している部分を言語機能で補う
    - 名前空間やジェネリクスなど
    - TODO: `+` 演算子やフォーマット文字列などの多相をうまく扱う必要がある
- 通常はメモリ安全な機能の組み合わせだけでコードを書けるようにしておく
    - 言語としてのメモリ安全性は保証しない代わりに、危険性を局所化する仕組みを提供する
    - (例えば `Vec[T]` があれば malloc を直接使わなくて済む、みたいな話)
    - TODO: メモリの解放をどうするか
- 静的型検査
- 網羅性検査

その他:

- 実行時の性能は考慮するが、最速は目指さない
    - Go や Java ぐらいの速度を目指す
    - (いまは最適化についてあまり考えていないので、そこまで速くないかもしれない)
- コンパイルの高速化をなるべく妨げない
    - コンパイル時間は開発者体験に悪い影響があるため
- 周辺ツールの性能や機能性をなるべく妨げない
    - 言語の利用者の体験には、リアルタイムのエラー報告や入力補完、自動リファクタリングなどの周辺ツールの強さも含まれるため
- 複数言語の運用を念頭におく
    - この言語で書かれたライブラリを使うときはアプリもこの言語で書くことになる、という状況は避けたい
    - C FFI をやりやすくしておく
    - GC や JIT などの強力なランタイムシステムがあると C FFI 時に考えることが増える気がする (このあたりは C# や Go からもっと学ぶ必要がある)
- コードを書き始めやすくする
    - ファイルやディレクトリを作るところから始めるのではなく、エディタを開いてコードを書き始めたい
    - ファイルを保存しなくても実行できる方がいい

要検討

- TODO: 非同期処理、マルチスレッドをどうするか
