#!/bin/bash

set -eux

function f() {
    NAME=$1

    if [[ ! -z $ONLY && $ONLY != $NAME ]]
    then
        return
    fi

    cargo run --bin jl_tests "tests/$NAME/$NAME.jacco"
}

# ONLY='empty' のように名前を書くと1つだけ実行される。
ONLY=''

f empty
f exit_with_42
f extern_fn
f add
f arithmetic
f if
f let
f operators

# 差分の量を表示する。
git diff --stat -- 'tests/*/*.txt'
